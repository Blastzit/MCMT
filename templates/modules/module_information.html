{% extends "base.html" %}
{% block header %}
  Module Information by Year
{% endblock header %}
{% block content %}
  <form method="get">
    <div class="mb-6">
      <label for="year" class="block font-semibold text-gray-700 mb-2">Select Year</label>
      <select name="year"
              id="year"
              class="w-full px-3 py-2 border border-gray-300 rounded-md"
              onChange="form.submit();">
        {% for year in years %}
          <option value="{{ year }}" {% if year == selected_year %}selected{% endif %}>{{ year }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-6">
      <label for="term" class="block font-semibold text-gray-700 mb-2">Select Term</label>
      <select name="term"
              id="term"
              class="w-full px-3 py-2 border border-gray-300 rounded-md"
              onChange="form.submit();">
        <option value="Autumn" {% if selected_term == "Autumn" %}selected{% endif %}>Autumn</option>
        <option value="Spring" {% if selected_term == "Spring" %}selected{% endif %}>Spring</option>
        <option value="Summer" {% if selected_term == "Summer" %}selected{% endif %}>Summer</option>
      </select>
    </div>
  </form>
  {% include "modules/module_list.html" with modules=filtered_modules %}
{% endblock content %}
{% block body_scripts %}
  <script>
    const buttons = document.querySelectorAll('.module-btn')
    buttons.forEach((button) => {
      button.addEventListener('click', () => {
        button.classList.toggle('rounded-b-none');
      });
    });
  </script>
{% endblock body_scripts %}
